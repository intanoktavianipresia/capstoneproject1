<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Admin - Portal Akademik</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <div class="header">
      <div class="d-flex align-items-center gap-3">
        <img src="./assets/img/logo-unib.jpeg" alt="Logo" class="logo" />
        <div>
          <h6 class="mb-0 fw-bold text-primary">PORTAL AKADEMIK</h6>
          <small class="text-muted">Universitas Bengkulu</small>
        </div>
      </div>
    </div>

    <div class="sidebar">
      <div class="profile">
        <img
          src="https://cdn-icons-png.flaticon.com/512/149/149071.png"
          alt="Admin"
        />
        <h6 id="adminName">Admin Portal</h6>
        <div class="status"><i class="bi bi-circle-fill"></i> Online</div>
      </div>

      <a href="dashboard_admin.html" class="active">
        <i class="bi bi-grid-fill"></i> Home
      </a>
      <a href="data_user.html">
        <i class="bi bi-people-fill"></i> Data Mahasiswa
      </a>
      <a href="deteksi_anomali.html">
        <i class="bi bi-shield-exclamation"></i> Deteksi Anomali
      </a>
      <a href="riwayat_login.html">
        <i class="bi bi-clock-history"></i> Riwayat Login
      </a>

      <div
        style="margin-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1)"
      ></div>

      <a href="#" onclick="handleLogout()">
        <i class="bi bi-box-arrow-right"></i> Log Out
      </a>
    </div>

    <div class="main-container">
      <div class="banner">
        <img src="./assets/img/gedung-unib.jpeg" alt="Gedung Kampus" />
      </div>

      <div class="content">
        <h5 class="fw-bold mb-4 border-bottom pb-2">
          <i class="bi bi-speedometer2"></i> Overview
        </h5>

        <div
          class="alert alert-primary d-flex align-items-center shadow-sm"
          role="alert"
        >
          <i class="bi bi-info-circle-fill me-3 fs-4"></i>
          <div>
            <strong>Status Sistem Deteksi (4-Level Risk):</strong>
            <span class="badge bg-success ms-2">RENDAH</span>
            <span class="badge bg-warning text-dark ms-1">SEDANG</span>
            <span class="badge bg-orange ms-1">TINGGI</span>
            <span class="badge bg-danger ms-1">KRITIS</span>
          </div>
        </div>

        <div class="row g-3 mb-4">
          <div class="col-md-3">
            <div class="card shadow-sm card-stat h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="text-muted mb-1 small text-uppercase">
                      Total Mahasiswa
                    </h6>
                    <h3 class="mb-0 fw-bold" id="totalMahasiswa">0</h3>
                  </div>
                  <div class="icon-box bg-primary bg-gradient">
                    <i class="bi bi-people"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card shadow-sm card-stat h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="text-muted mb-1 small text-uppercase">
                      Login Hari Ini
                    </h6>
                    <h3 class="mb-0 fw-bold" id="totalLoginToday">0</h3>
                  </div>
                  <div class="icon-box bg-success bg-gradient">
                    <i class="bi bi-door-open"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-3">
            <div class="card shadow-sm card-stat h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="text-muted mb-1 small text-uppercase">
                      Akun Diblokir
                    </h6>
                    <h3 class="mb-0 fw-bold text-danger" id="akunDiblokir">
                      0
                    </h3>
                  </div>
                  <div class="icon-box bg-danger bg-gradient">
                    <i class="bi bi-shield-x"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card shadow-sm card-stat h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <h6 class="text-muted mb-1 small text-uppercase">
                      Butuh Tinjauan
                    </h6>
                    <h3
                      class="mb-0 fw-bold text-warning"
                      id="anomaliBelumDitinjau"
                    >
                      0
                    </h3>
                  </div>
                  <div class="icon-box bg-warning bg-gradient text-dark">
                    <i class="bi bi-exclamation-triangle"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row g-3">
          <div class="col-lg-8">
            <div class="card shadow-sm h-100">
              <div class="card-header bg-white py-3">
                <h6 class="mb-0 fw-bold">
                  <i class="bi bi-activity text-primary"></i> Aktivitas Login
                  Terbaru
                </h6>
              </div>
              <div class="card-body p-0">
                <div class="table-responsive">
                  <table
                    class="table table-sm table-hover table-borderless table-custom"
                    style="font-size: 0.8rem"
                  >
                    <thead>
                      <tr>
                        <th style="width: 10%">NIM</th>
                        <th style="width: 25%">Nama Mahasiswa</th>
                        <th style="width: 20%">Waktu Login</th>
                        <th style="width: 15%">IP Address</th>
                        <th style="width: 10%">Skor</th>
                        <th style="width: 20%">Status</th>
                      </tr>
                    </thead>
                    <tbody id="recentActivityTableBody"></tbody>
                  </table>
                </div>
              </div>
              <div class="card-footer bg-white text-center">
                <a
                  href="riwayat_login.html"
                  class="text-decoration-none small fw-bold"
                  >Lihat Semua Riwayat â†’</a
                >
              </div>
            </div>
          </div>

          <div class="col-lg-4">
            <div class="card shadow-sm mb-3">
              <div class="card-header bg-white py-3">
                <h6 class="mb-0 fw-bold">
                  <i class="bi bi-pie-chart text-success"></i> Ringkasan Akun
                </h6>
              </div>
              <div class="card-body">
                <table class="table table-sm table-borderless mb-0">
                  <tr>
                    <td>
                      <i class="bi bi-circle-fill text-success small me-2"></i>
                      Aktif
                    </td>
                    <td class="text-end fw-bold" id="statusAktif">0</td>
                  </tr>
                  <tr>
                    <td>
                      <i class="bi bi-circle-fill text-warning small me-2"></i>
                      Ditunda
                    </td>
                    <td class="text-end fw-bold" id="statusDitunda">0</td>
                  </tr>
                  <tr>
                    <td>
                      <i class="bi bi-circle-fill text-danger small me-2"></i>
                      Diblokir
                    </td>
                    <td class="text-end fw-bold" id="statusDiblokir">0</td>
                  </tr>
                  <tr class="border-top">
                    <td class="pt-2">
                      <i class="bi bi-eye-fill text-info small me-2"></i> Dalam
                      Pantauan
                    </td>
                    <td class="text-end fw-bold pt-2" id="statusDipantau">0</td>
                  </tr>
                </table>
              </div>
            </div>

            <div class="card shadow-sm">
              <div class="card-header bg-white py-3">
                <h6 class="mb-0 fw-bold">
                  <i class="bi bi-lightning-charge text-warning"></i> Aksi Cepat
                </h6>
              </div>
              <div class="card-body d-grid gap-2">
                <button
                  class="btn btn-outline-primary btn-sm text-start"
                  onclick="goToDataUser()"
                >
                  <i class="bi bi-person-plus me-2"></i> Tambah/Edit Mahasiswa
                </button>
                <button
                  class="btn btn-outline-danger btn-sm text-start"
                  onclick="goToDeteksiAnomali()"
                >
                  <i class="bi bi-search me-2"></i> Tinjau Anomali Kritis
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer>
        &copy; 2025 Portal Akademik - Sistem Deteksi Anomali Login
      </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/frontend/assets/js/config.js"></script>
    <script src="/frontend/assets/js/utils.js"></script>
    <script src="/frontend/assets/js/admin.js"></script>
  </body>
</html>
