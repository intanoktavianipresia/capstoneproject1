<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Riwayat Login - Portal Akademik</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Anton&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/frontend/assets/css/style.css" />
  </head>
  <body>
    <div class="sidebar">
      <div class="profile">
        <img
          src="https://cdn-icons-png.flaticon.com/512/149/149071.png"
          alt="Admin"
        />
        <h6 id="adminName">Admin Portal</h6>
        <div class="status"><i class="bi bi-circle-fill"></i> Online</div>
      </div>
      <a href="dashboard_admin.html"><i class="bi bi-house-door"></i> Home</a>
      <a href="data_user.html"><i class="bi bi-people"></i> Data Mahasiswa</a>
      <a href="deteksi_anomali.html"
        ><i class="bi bi-exclamation-triangle"></i> Deteksi Anomali</a
      >
      <a href="riwayat_login.html" class="active"
        ><i class="bi bi-clock-history"></i> Riwayat Login</a
      >
      <a href="#" onclick="handleLogout()"
        ><i class="bi bi-box-arrow-right"></i> Log Out</a
      >
    </div>

    <div class="main-container">
      <!-- Header -->
      <div class="header">
        <div class="d-flex align-items-center gap-3">
          <img src="./assets/img/logo-unib.jpeg" alt="Logo" class="logo" />
          <div>
            <h5 class="mb-0 fw-bold">PORTAL AKADEMIK</h5>
            <small>Universitas Bengkulu</small>
          </div>
        </div>
      </div>

      <!-- Banner -->
      <div class="banner">
        <img src="./assets/img/gedung-unib.jpeg" alt="Gedung Kampus" />
      </div>

      <!-- Content -->
      <div class="content">
        <h5>Riwayat Login</h5>

        <!-- Filter -->
        <div class="filter-box">
          <div class="row g-3">
            <div class="col-md-3">
              <label class="form-label"><strong>Cari NIM:</strong></label>
              <input
                type="text"
                class="form-control"
                id="searchNIM"
                placeholder="Masukkan NIM..."
              />
            </div>
            <div class="col-md-3">
              <label class="form-label"><strong>Status Login:</strong></label>
              <select class="form-select" id="filterStatus">
                <option value="all">Semua</option>
                <option value="berhasil">Berhasil</option>
                <option value="gagal">Gagal</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label"><strong>Hasil Deteksi:</strong></label>
              <select class="form-select" id="filterHasil">
                <option value="all">Semua</option>
                <option value="normal">Normal</option>
                <option value="peringatan">Peringatan</option>
                <option value="blokir">Blokir</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">&nbsp;</label>
              <button class="btn btn-primary w-100" onclick="applyFilter()">
                <i class="bi bi-search"></i> Cari
              </button>
            </div>
          </div>
        </div>

        <div class="card shadow-sm">
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table-custom mb-0">
                <thead>
                  <tr>
                    <th style="width: 4%">No</th>
                    <th style="width: 9%">NIM</th>
                    <th style="width: 13%">Nama</th>
                    <th style="width: 12%">Waktu Login</th>
                    <th style="width: 11%">IP Address</th>
                    <th style="width: 12%">Lokasi</th>
                    <th style="width: 10%">Device</th>
                    <th style="width: 7%">Status</th>
                    <th style="width: 6%">Skor</th>
                    <th style="width: 6%">Risk</th>
                    <th style="width: 10%">Hasil</th>
                    <th style="width: 10%">Keterangan</th>
                  </tr>
                </thead>
                <tbody id="riwayatTable">
                  <tr>
                    <td colspan="10" class="text-center py-4">
                      <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Pagination -->
        <div class="pagination-box">
          <div>
            <small class="text-muted" id="paginationInfo">Loading...</small>
          </div>
          <div id="paginationButtons">
            <!-- Buttons will be inserted here -->
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer>Â© 2025 Sistem Portal Login Deteksi Anomali</footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/frontend/assets/js/config.js"></script>
    <script src="/frontend/assets/js/utils.js"></script>
    <script src="/frontend/assets/js/riwayat_login.js"></script>
  </body>
</html>
